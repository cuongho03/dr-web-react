{"ast":null,"code":"import axios from'axios';import{message}from'antd';import{getQueryString}from'../helper/common';function send(_ref){var _ref$method=_ref.method,method=_ref$method===void 0?'get':_ref$method,path=_ref.path,_ref$data=_ref.data,data=_ref$data===void 0?null:_ref$data,_ref$query=_ref.query,query=_ref$query===void 0?null:_ref$query,_ref$headers=_ref.headers,headers=_ref$headers===void 0?{}:_ref$headers;return new Promise(function(resolve){var url=\"\".concat(path).concat(getQueryString(query));axios({method:method,url:url,data:data,headers:headers}).then(function(result){var data=result.data;return resolve(data);}).catch(function(error){var result=error;if(!result){message.error('Something was wrong when request!');}else{var status=result.status,_data=result.data;if(status===401&&_data==='TokenExpired'){message.error('TokenExpired');}else if(status===401&&_data==='Unauthorized'||status===403&&_data==='InvalidToken'){message.error('Unauthorized').then(function(){window.localStorage.clear();window.location.href='/login';});}else{return resolve(result.data);}}});});}export default{send:send};","map":{"version":3,"sources":["/Users/nexle-user/Documents/dr-web-react/src/services/request.js"],"names":["axios","message","getQueryString","send","method","path","data","query","headers","Promise","resolve","url","then","result","catch","error","status","window","localStorage","clear","location","href"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,OAASC,OAAT,KAAwB,MAAxB,CACA,OACEC,cADF,KAEO,kBAFP,CAIA,QAASC,CAAAA,IAAT,MAEG,sBADDC,MACC,CADDA,MACC,sBADQ,KACR,aADeC,IACf,MADeA,IACf,gBADqBC,IACrB,CADqBA,IACrB,oBAD4B,IAC5B,2BADkCC,KAClC,CADkCA,KAClC,qBAD0C,IAC1C,8BADgDC,OAChD,CADgDA,OAChD,uBAD0D,EAC1D,cAED,MAAO,IAAIC,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAa,CAC9B,GAAMC,CAAAA,GAAG,WAAMN,IAAN,SAAaH,cAAc,CAACK,KAAD,CAA3B,CAAT,CACAP,KAAK,CAAC,CACJI,MAAM,CAANA,MADI,CACIO,GAAG,CAAHA,GADJ,CACSL,IAAI,CAAJA,IADT,CACeE,OAAO,CAAPA,OADf,CAAD,CAAL,CAGGI,IAHH,CAGQ,SAACC,MAAD,CAAY,CAChB,GAAMP,CAAAA,IAAI,CAAGO,MAAM,CAACP,IAApB,CACA,MAAOI,CAAAA,OAAO,CAACJ,IAAD,CAAd,CACD,CANH,EAOGQ,KAPH,CAOS,SAACC,KAAD,CAAW,CAChB,GAAMF,CAAAA,MAAM,CAAGE,KAAf,CAEA,GAAI,CAACF,MAAL,CAAa,CACXZ,OAAO,CAACc,KAAR,CAAc,mCAAd,EACD,CAFD,IAGK,IACKC,CAAAA,MADL,CACsBH,MADtB,CACKG,MADL,CACaV,KADb,CACsBO,MADtB,CACaP,IADb,CAGH,GAAIU,MAAM,GAAK,GAAX,EAAkBV,KAAI,GAAK,cAA/B,CAA+C,CAC7CL,OAAO,CAACc,KAAR,CAAc,cAAd,EACD,CAFD,IAGK,IACFC,MAAM,GAAK,GAAX,EAAkBV,KAAI,GAAK,cAA5B,EAAgDU,MAAM,GAAK,GAAX,EAAkBV,KAAI,GAAK,cADxE,CACyF,CAC5FL,OAAO,CAACc,KAAR,CAAc,cAAd,EACGH,IADH,CACQ,UAAM,CACVK,MAAM,CAACC,YAAP,CAAoBC,KAApB,GACAF,MAAM,CAACG,QAAP,CAAgBC,IAAhB,CAAuB,QAAvB,CACD,CAJH,EAKD,CAPI,IAQA,CACH,MAAOX,CAAAA,OAAO,CAACG,MAAM,CAACP,IAAR,CAAd,CACD,CACF,CACF,CA/BH,EAgCD,CAlCM,CAAP,CAmCD,CAED,cAAe,CACbH,IAAI,CAAJA,IADa,CAAf","sourcesContent":["import axios from 'axios'\n\nimport { message } from 'antd'\nimport {\n  getQueryString,\n} from '../helper/common'\n\nfunction send({\n  method = 'get', path, data = null, query = null, headers = {},\n}) {\n\n  return new Promise((resolve) => {\n    const url = `${path}${getQueryString(query)}`\n    axios({\n      method, url, data, headers,\n    })\n      .then((result) => {\n        const data = result.data\n        return resolve(data)\n      })\n      .catch((error) => {\n        const result = error\n\n        if (!result) {\n          message.error('Something was wrong when request!')\n        }\n        else {\n          const { status, data } = result\n\n          if (status === 401 && data === 'TokenExpired') {\n            message.error('TokenExpired')\n          }\n          else if (\n            (status === 401 && data === 'Unauthorized') || (status === 403 && data === 'InvalidToken')) {\n            message.error('Unauthorized')\n              .then(() => {\n                window.localStorage.clear()\n                window.location.href = '/login'\n              })\n          }\n          else {\n            return resolve(result.data)\n          }\n        }\n      })\n  })\n}\n\nexport default {\n  send,\n}\n"]},"metadata":{},"sourceType":"module"}