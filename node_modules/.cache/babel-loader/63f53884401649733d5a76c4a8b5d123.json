{"ast":null,"code":"import axios from 'axios';\nimport { message } from 'antd';\nimport { getQueryString } from '../helper/common';\n\nfunction send({\n  method = 'get',\n  path,\n  data = null,\n  query = null,\n  headers = {}\n}) {\n  return new Promise(resolve => {\n    const url = `${path}${getQueryString(query)}`;\n    axios({\n      method,\n      url,\n      data,\n      headers\n    }).then(result => {\n      const data = result.data;\n      return resolve(data);\n    }).catch(error => {\n      const result = error;\n\n      if (!result) {\n        message.error('Something was wrong when request!');\n      } else {\n        const {\n          status,\n          data\n        } = result;\n\n        if (status === 401 && data === 'TokenExpired') {\n          message.error('TokenExpired');\n        } else if (status === 401 && data === 'Unauthorized' || status === 403 && data === 'InvalidToken') {\n          message.error('Unauthorized').then(() => {\n            window.localStorage.clear();\n            window.location.href = '/login';\n          });\n        } else {\n          return resolve(result.data);\n        }\n      }\n    });\n  });\n}\n\nexport default {\n  send\n};","map":{"version":3,"sources":["/Users/nexle-user/Documents/dr-web-react/src/services/request.js"],"names":["axios","message","getQueryString","send","method","path","data","query","headers","Promise","resolve","url","then","result","catch","error","status","window","localStorage","clear","location","href"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,OAAT,QAAwB,MAAxB;AACA,SACEC,cADF,QAEO,kBAFP;;AAIA,SAASC,IAAT,CAAc;AACZC,EAAAA,MAAM,GAAG,KADG;AACIC,EAAAA,IADJ;AACUC,EAAAA,IAAI,GAAG,IADjB;AACuBC,EAAAA,KAAK,GAAG,IAD/B;AACqCC,EAAAA,OAAO,GAAG;AAD/C,CAAd,EAEG;AAED,SAAO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;AAC9B,UAAMC,GAAG,GAAI,GAAEN,IAAK,GAAEH,cAAc,CAACK,KAAD,CAAQ,EAA5C;AACAP,IAAAA,KAAK,CAAC;AACJI,MAAAA,MADI;AACIO,MAAAA,GADJ;AACSL,MAAAA,IADT;AACeE,MAAAA;AADf,KAAD,CAAL,CAGGI,IAHH,CAGSC,MAAD,IAAY;AAChB,YAAMP,IAAI,GAAGO,MAAM,CAACP,IAApB;AACA,aAAOI,OAAO,CAACJ,IAAD,CAAd;AACD,KANH,EAOGQ,KAPH,CAOUC,KAAD,IAAW;AAChB,YAAMF,MAAM,GAAGE,KAAf;;AAEA,UAAI,CAACF,MAAL,EAAa;AACXZ,QAAAA,OAAO,CAACc,KAAR,CAAc,mCAAd;AACD,OAFD,MAGK;AACH,cAAM;AAAEC,UAAAA,MAAF;AAAUV,UAAAA;AAAV,YAAmBO,MAAzB;;AAEA,YAAIG,MAAM,KAAK,GAAX,IAAkBV,IAAI,KAAK,cAA/B,EAA+C;AAC7CL,UAAAA,OAAO,CAACc,KAAR,CAAc,cAAd;AACD,SAFD,MAGK,IACFC,MAAM,KAAK,GAAX,IAAkBV,IAAI,KAAK,cAA5B,IAAgDU,MAAM,KAAK,GAAX,IAAkBV,IAAI,KAAK,cADxE,EACyF;AAC5FL,UAAAA,OAAO,CAACc,KAAR,CAAc,cAAd,EACGH,IADH,CACQ,MAAM;AACVK,YAAAA,MAAM,CAACC,YAAP,CAAoBC,KAApB;AACAF,YAAAA,MAAM,CAACG,QAAP,CAAgBC,IAAhB,GAAuB,QAAvB;AACD,WAJH;AAKD,SAPI,MAQA;AACH,iBAAOX,OAAO,CAACG,MAAM,CAACP,IAAR,CAAd;AACD;AACF;AACF,KA/BH;AAgCD,GAlCM,CAAP;AAmCD;;AAED,eAAe;AACbH,EAAAA;AADa,CAAf","sourcesContent":["import axios from 'axios'\n\nimport { message } from 'antd'\nimport {\n  getQueryString,\n} from '../helper/common'\n\nfunction send({\n  method = 'get', path, data = null, query = null, headers = {},\n}) {\n\n  return new Promise((resolve) => {\n    const url = `${path}${getQueryString(query)}`\n    axios({\n      method, url, data, headers,\n    })\n      .then((result) => {\n        const data = result.data\n        return resolve(data)\n      })\n      .catch((error) => {\n        const result = error\n\n        if (!result) {\n          message.error('Something was wrong when request!')\n        }\n        else {\n          const { status, data } = result\n\n          if (status === 401 && data === 'TokenExpired') {\n            message.error('TokenExpired')\n          }\n          else if (\n            (status === 401 && data === 'Unauthorized') || (status === 403 && data === 'InvalidToken')) {\n            message.error('Unauthorized')\n              .then(() => {\n                window.localStorage.clear()\n                window.location.href = '/login'\n              })\n          }\n          else {\n            return resolve(result.data)\n          }\n        }\n      })\n  })\n}\n\nexport default {\n  send,\n}\n"]},"metadata":{},"sourceType":"module"}